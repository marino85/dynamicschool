<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets" 
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/WEB-INF/template.xhtml" >


    <ui:define name="content">

        <!--        <p:outputConnectionStatus/>-->
        <h:form id="Personas" >
            <p:panel header="Creación de Personas">
                <p:messages showDetail="true"/>

                <h:panelGrid columns="4">


                    <p:outputLabel value="Perfil:"/>
                    <p:selectOneMenu  value="#{usuariosBean.newUser.idPerfil}" converter="#{convertersBean.perfilesConverter}"> 
                        <p:ajax update="Personas" event="change" ></p:ajax>
                        <f:selectItem itemValue="-1" itemLabel="Seleccione.."/>
                        <f:selectItems value="#{generalListBean.perfiles}" var="perfil" itemLabel="#{perfil.descripcion}"/>

                    </p:selectOneMenu>

                    <p:outputLabel value="Tipo Documento:"/>
                    <p:selectOneMenu value="#{usuariosBean.newUser.tipoDoc}" converter="#{convertersBean.tipoDocConverter}"> 
                        <f:selectItems value="#{generalListBean.tiposDoc}" var="tipoDoc" itemLabel="#{tipoDoc.descripcion}"/>
                    </p:selectOneMenu>

                    <p:outputLabel value=" Número Documento:"/>
                    <p:inputText value="#{usuariosBean.newUser.numeroDoc}" required="true" requiredMessage="Número Documento Obligatorio"></p:inputText>

                    <p:outputLabel value="Código: "/>
                    <p:inputText id="codigo" value="#{usuariosBean.newUser.codigo}" required="true" requiredMessage="Codigo: campo obligatorio" title="Código empleado para identificar cuando el usuario es un estudiante">


                    </p:inputText>

                    <p:outputLabel value=" Jornada:"/>
                    <p:selectOneMenu value="#{usuariosBean.newUser.idJornada}" converter="#{convertersBean.jornadaConverter}"> 
                        <f:selectItems value="#{generalListBean.jornada}" var="jornada" itemLabel="#{jornada.descripcion}"/>
                    </p:selectOneMenu>

                    <p:outputLabel value="Nombres: "/>
                    <p:inputText value="#{usuariosBean.newUser.nombres}" required="true" requiredMessage="Nombres: campo obligatorio"/>

                    <p:outputLabel value="Apellidos: "/>
                    <p:inputText value="#{usuariosBean.newUser.apellidos}" required="true" requiredMessage="Apellidos: campo obligatorio"/>

                    <p:outputLabel value=" Dirección: "/>
                    <p:inputText value="#{usuariosBean.newUser.direccion}" required="true" requiredMessage="Dirección: campo obligatorio"/>

                    <p:outputLabel value="Teléfono: "/>
                    <p:inputText value="#{usuariosBean.newUser.telefono}" required="true" requiredMessage="Telefono: campo obligatorio"/>

                    <p:outputLabel value=" Correo Personal: "/>
                    <p:inputText id="email" value="#{usuariosBean.newUser.email}" required="true"  requiredMessage="E-mail : campo obligatorio">


                    </p:inputText>

                    <p:outputLabel value=" Fecha de Nacimiento: "/> 
                    <p:calendar value="#{usuariosBean.newUser.fechaNacimiento}" pattern="dd/MM/yyyy" navigator="true" />
<!--                        <p:selectInputDate renderAsPopup="true"   value="#{usuariosBean.newUser.fechaNacimiento}"
                                         renderMonthAsDropdown="true"  renderYearAsDropdown="true" 
                                         >
                        <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-5"/>
                    </p:selectInputDate>-->

                    <!--                        <ace:dateTimeEntry id="cal"
                                                               value="#{usuariosBean.newUser.fechaNacimiento}"
                                                               timeZone="GMT-5"
                                                               pattern="dd/MM/yyyy"                                           
                                                               popupIconOnly="true"
                                                               renderAsPopup="true"                                          
                                                               rendered="true"
                                                               showOtherMonths="true"
                                                               navigator="true"
                                                               
                                                               />-->
                    <p:outputLabel value="Sexo:"/>
                    <p:selectOneMenu  value="#{usuariosBean.newUser.sexo}"> 
                        <f:selectItem itemLabel="M" itemValue="M"></f:selectItem>
                        <f:selectItem itemLabel="F" itemValue="F"></f:selectItem>
                    </p:selectOneMenu>

                    <p:outputLabel value="  Estado:"/>
                    <p:selectOneMenu value="#{usuariosBean.newUser.estadoUsuario}" converter="#{convertersBean.estadosUsuarioConverter}"> 
                        <f:selectItems value="#{generalListBean.estadosUsuario}" var="estado" itemLabel="#{estado.descripcion}"/>
                    </p:selectOneMenu>


                    <p:outputLabel value=" Nivel:" id="niveltext" rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"/>
                    <p:selectOneMenu id="cmpNivel" value="#{usuariosBean.newUser.idNivel}" converter="#{convertersBean.nivelesConverter}" 
                                     rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"> 
                        <f:selectItems value="#{generalListBean.nivelesCurso}" 
                                       var="nivel" 
                                       itemLabel="#{nivel.descripcion}"/>
                    </p:selectOneMenu>


                    <p:outputLabel value="Fecha Inicio:" rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"/>
                    <p:calendar value="#{usuariosBean.newUser.fechaInicio}" pattern="dd/MM/yyyy" navigator="true"  rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"/>
<!--                        <p:selectInputDate renderAsPopup="true"    value="#{usuariosBean.newUser.fechaInicio}"
                                         renderMonthAsDropdown="true"  renderYearAsDropdown="true" 
                                         rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"
                                         >
                        <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-5"/>
                    </p:selectInputDate>-->
                    <!--                        <ace:dateTimeEntry id="fechaInicio" 
                                                               value="#{usuariosBean.newUser.fechaInicio}"
                                                               renderAsPopup="true"
                                                               timeZone="GMT-5"
                                                                rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"
                                                               pattern="dd/MM/yyyy"
                                                               showOtherMonths="true"
                                                               navigator="true"/>-->

                    <p:outputLabel value="Fecha Fin:" rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"/>
                    <p:calendar value="#{usuariosBean.newUser.fechaFin}"  navigator="true" pattern="dd/MM/yyyy"  rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"/>
<!--                        <p:selectInputDate renderAsPopup="true"   value="#{usuariosBean.newUser.fechaFin}"
                                         renderMonthAsDropdown="true"  renderYearAsDropdown="true" 
                                         rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"
                                         >
                        <f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-5"/>
                    </p:selectInputDate>-->
                    <!--                        <ace:dateTimeEntry id="fechaFin"
                                                               value="#{usuariosBean.newUser.fechaFin}"
                                                               renderAsPopup="true"
                                                               timeZone="GMT-5"
                                                              rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"
                                                               pattern="dd/MM/yyyy"
                                                               showOtherMonths="true"
                                                               navigator="true"/>-->
                     <p:outputLabel value="Docente:" rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"/>
                     <p:selectOneMenu value="#{usuariosBean.newUser.idProfesor}"
                                       rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}" style="width: 300px;"
                                         > 
                         <f:selectItem itemLabel="Seleccione" itemValue="0"></f:selectItem>
                            <f:selectItems value="#{generalListBean.usuarios}" 
                                           var="usuario" 
                                           itemLabel="#{usuario.nombres} #{usuario.apellidos}"
                                           itemValue="#{usuario.idUsuario}"/>
                     </p:selectOneMenu>
                     
                     <p:outputLabel value="Jornada Asistencia:" rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}"/>
                     <p:selectOneMenu value="#{usuariosBean.newUser.asistencia}"
                                       rendered="#{usuariosBean.newUser.idPerfil.idPerfil==1}" 
                                         >
                         <f:selectItem itemLabel="Seleccione" itemValue=""></f:selectItem>
                         
                         
                         <f:selectItem itemLabel="Manaña" itemValue="Manaña"></f:selectItem>
                         <f:selectItem itemLabel="Tarde" itemValue="Tarde"></f:selectItem>
                           
                     </p:selectOneMenu>
                     
                     
                </h:panelGrid>                    



                <h:panelGrid columns="1">
                    <h:panelGroup>
                        <h:panelGrid columns="2">

                            <p:outputLabel value="Nivel de Educación:"/>
                            <p:selectOneMenu value="#{usuariosBean.newUser.nivelEducacion}">
                                <f:selectItem itemValue="P" itemLabel="Primaria"/>
                                <f:selectItem itemValue="B" itemLabel="Bachillerato"/>
                                <f:selectItem itemValue="T" itemLabel="Técnico"/>
                                <f:selectItem itemValue="R" itemLabel="Tecnólogo"/>
                                <f:selectItem itemValue="W" itemLabel="Profesional"/>
                                <f:selectItem itemValue="O" itemLabel="Otro"/>
                            </p:selectOneMenu>

                        </h:panelGrid>
                    </h:panelGroup>

                    <h:panelGroup>
                        <p:commandButton value="Guardar" icon="ui-icon-disk"
                                         update=":crearpopup,:Personas" 
                                         actionListener="#{usuariosBean.guardar(evt)}"  > 
                        </p:commandButton>

                        <p:commandButton immediate="true" icon="ui-icon-close" value="Cancelar"  action="consultarEstudiante" > 
                        </p:commandButton>

                    </h:panelGroup>



                </h:panelGrid>    

            </p:panel>

        </h:form>
    </ui:define>
    <ui:define name="popup">
        <h:form id="crearpopup">
            <p:dialog id="dialog"
                      closable="fasle"
                      modal="true"
                      draggable="false"
                      widgetVar="comfirm"
                      header="Mensaje Confirmación"
                      width="400"
                      visible="#{usuariosBean.showDialog}">




                <h:panelGrid id="messagecrear">
                    <p:outputLabel value="#{usuariosBean.messaje}"></p:outputLabel>                    
                </h:panelGrid>
                <p:commandButton value="Aceptar" update=":crearpopup,:Personas" icon="ui-icon-info" actionListener="#{usuariosBean.aceptar(evt)}"
                                 ></p:commandButton>



            </p:dialog>
        </h:form>
    </ui:define>



</ui:composition>
